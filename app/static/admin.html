<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - –ò–≥—Ä–æ–≤—ã–µ –ê–≤—Ç–æ–º–∞—Ç—ã</title>
    <link rel="stylesheet" href="/static/admin-style.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-spinner"></div>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏...</p>
    </div>

    <!-- Login Form -->
    <div id="login-section" class="login-container" style="display: none;">
        <div class="login-card">
            <h1>üîí –í—Ö–æ–¥ –≤ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
            <form id="login-form">
                <div class="input-group">
                    <label for="username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="input-group">
                    <label for="password">–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" id="login-btn" class="login-button">
                    <span class="button-text">–í–æ–π—Ç–∏</span>
                    <span class="button-spinner" style="display: none;">‚è≥</span>
                </button>
            </form>
            <div id="login-error" class="error-message" style="display: none;"></div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="dashboard" class="dashboard" style="display: none;">
        <!-- Header -->
        <header class="dashboard-header">
            <h1>üé∞ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ò–≥—Ä–æ–≤—ã—Ö –ê–≤—Ç–æ–º–∞—Ç–æ–≤</h1>
            <div class="admin-info">
                <span id="admin-username">admin</span>
                <button id="logout-btn" class="logout-button">–í—ã–π—Ç–∏</button>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="dashboard-nav">
            <button class="nav-btn active" data-section="overview">üìä –û–±–∑–æ—Ä</button>
            <button class="nav-btn" data-section="probability">üé≤ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏</button>
            <button class="nav-btn" data-section="sessions">üë• –°–µ—Å—Å–∏–∏</button>
            <button class="nav-btn" data-section="analytics">üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</button>
        </nav>

        <!-- Main Content -->
        <main class="dashboard-content">
            <!-- Overview Section -->
            <section id="overview-section" class="content-section active">
                <h2>–°–∏—Å—Ç–µ–º–Ω—ã–π –æ–±–∑–æ—Ä</h2>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-content">
                            <h3>–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏</h3>
                            <div class="stat-value" id="active-sessions">-</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üé∞</div>
                        <div class="stat-content">
                            <h3>–í—Å–µ–≥–æ –≤—Ä–∞—â–µ–Ω–∏–π</h3>
                            <div class="stat-value" id="total-spins">-</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-content">
                            <h3>–û–±—â–∏–µ –≤—ã–∏–≥—Ä—ã—à–∏</h3>
                            <div class="stat-value" id="total-winnings">-</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-content">
                            <h3>House Edge</h3>
                            <div class="stat-value" id="house-edge">-</div>
                        </div>
                    </div>
                </div>

                <div class="overview-charts">
                    <div class="chart-container">
                        <h3>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–π (24—á)</h3>
                        <canvas id="sessions-chart" width="400" height="200"></canvas>
                    </div>

                    <div class="chart-container">
                        <h3>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—ã–∏–≥—Ä—ã—à–µ–π</h3>
                        <canvas id="winnings-chart" width="400" height="200"></canvas>
                    </div>
                </div>
            </section>

            <!-- Probability Section -->
            <section id="probability-section" class="content-section">
                <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è–º–∏</h2>

                <div class="probability-controls">
                    <div class="current-settings">
                        <h3>–¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                        <div id="current-probability-display">
                            <!-- Current probability settings will be loaded here -->
                        </div>
                        <div class="theoretical-rtp">
                            <strong>–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π RTP: <span id="current-rtp">0.00%</span></strong>
                        </div>
                    </div>

                    <div class="probability-editor">
                        <h3>–†–µ–¥–∞–∫—Ç–æ—Ä –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π</h3>
                        <form id="probability-form">
                            <div class="symbols-grid" id="symbols-grid">
                                <!-- Symbol controls will be generated here -->
                            </div>

                            <div class="form-actions">
                                <button type="button" id="reset-probability-btn" class="secondary-button">
                                    –°–±—Ä–æ—Å –∫ —É–º–æ–ª—á–∞–Ω–∏—è–º
                                </button>
                                <button type="button" id="preview-changes-btn" class="secondary-button">
                                    –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
                                </button>
                                <button type="submit" class="primary-button">
                                    –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                                </button>
                            </div>
                        </form>

                        <div id="probability-preview" class="preview-section" style="display: none;">
                            <h4>–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä</h4>
                            <div class="preview-content">
                                <div class="preview-rtp">
                                    <strong>–ù–æ–≤—ã–π RTP: <span id="preview-rtp">0.00%</span></strong>
                                    <span class="rtp-diff" id="rtp-difference"></span>
                                </div>
                                <div class="preview-probabilities" id="preview-probabilities">
                                    <!-- Preview probabilities will be shown here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="probability-testing">
                    <h3>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</h3>
                    <div class="testing-controls">
                        <input type="number" id="test-simulations" value="10000" min="1000" max="100000" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º—É–ª—è—Ü–∏–π">
                        <button id="run-test-btn" class="secondary-button">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç</button>
                    </div>
                    <div id="test-results" class="test-results" style="display: none;"></div>
                </div>
            </section>

            <!-- Sessions Section -->
            <section id="sessions-section" class="content-section">
                <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏</h2>

                <div class="sessions-controls">
                    <div class="filters">
                        <select id="session-filter">
                            <option value="all">–í—Å–µ —Å–µ—Å—Å–∏–∏</option>
                            <option value="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</option>
                            <option value="inactive">–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ</option>
                            <option value="recent">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 24—á</option>
                        </select>

                        <input type="text" id="session-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ ID —Å–µ—Å—Å–∏–∏...">

                        <button id="refresh-sessions-btn" class="secondary-button">–û–±–Ω–æ–≤–∏—Ç—å</button>
                    </div>
                </div>

                <div class="sessions-table-container">
                    <table id="sessions-table" class="data-table">
                        <thead>
                            <tr>
                                <th>ID –°–µ—Å—Å–∏–∏</th>
                                <th>–°–æ–∑–¥–∞–Ω–∞</th>
                                <th>–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</th>
                                <th>–ö—Ä–µ–¥–∏—Ç—ã</th>
                                <th>–í—Ä–∞—â–µ–Ω–∏–π</th>
                                <th>–í—ã–∏–≥—Ä—ã—à–∏</th>
                                <th>RTP</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="sessions-table-body">
                            <!-- Sessions data will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <div class="pagination" id="sessions-pagination">
                    <!-- Pagination controls will be generated here -->
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics-section" class="content-section">
                <h2>–î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>

                <div class="analytics-controls">
                    <div class="time-range">
                        <label for="analytics-period">–ü–µ—Ä–∏–æ–¥:</label>
                        <select id="analytics-period">
                            <option value="1">–ü–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å</option>
                            <option value="6">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 6 —á–∞—Å–æ–≤</option>
                            <option value="24" selected>–ü–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞</option>
                            <option value="168">–ü–æ—Å–ª–µ–¥–Ω—è—è –Ω–µ–¥–µ–ª—è</option>
                        </select>
                    </div>

                    <button id="export-analytics-btn" class="secondary-button">
                        üìä –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
                    </button>
                </div>

                <div class="analytics-grid">
                    <div class="analytics-card">
                        <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä—ã</h3>
                        <div id="game-statistics">
                            <!-- Game statistics will be loaded here -->
                        </div>
                    </div>

                    <div class="analytics-card">
                        <h3>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—ã–∏–≥—Ä—ã—à–µ–π</h3>
                        <canvas id="win-distribution-chart" width="400" height="300"></canvas>
                    </div>

                    <div class="analytics-card">
                        <h3>RTP –ø–æ –≤—Ä–µ–º–µ–Ω–∏</h3>
                        <canvas id="rtp-timeline-chart" width="400" height="300"></canvas>
                    </div>

                    <div class="analytics-card">
                        <h3>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                        <canvas id="user-activity-chart" width="400" height="300"></canvas>
                    </div>
                </div>

                <div class="detailed-reports">
                    <h3>–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã</h3>
                    <div class="reports-grid">
                        <div class="report-item">
                            <h4>–û—Ç—á–µ—Ç –ø–æ —Å–∏–º–≤–æ–ª–∞–º</h4>
                            <p>–ê–Ω–∞–ª–∏–∑ —á–∞—Å—Ç–æ—Ç—ã –ø–æ—è–≤–ª–µ–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤</p>
                            <button class="report-btn" data-report="symbols">–°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç</button>
                        </div>

                        <div class="report-item">
                            <h4>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á–µ—Ç</h4>
                            <p>–ê–Ω–∞–ª–∏–∑ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∏ –≤—ã–ø–ª–∞—Ç</p>
                            <button class="report-btn" data-report="financial">–°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç</button>
                        </div>

                        <div class="report-item">
                            <h4>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ—Ç—á–µ—Ç</h4>
                            <p>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤</p>
                            <button class="report-btn" data-report="users">–°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal for confirmations -->
    <div id="modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h3>
                <span class="modal-close">&times;</span>
            </div>
            <div class="modal-body">
                <p id="modal-message">–í—ã —É–≤–µ—Ä–µ–Ω—ã?</p>
            </div>
            <div class="modal-footer">
                <button id="modal-cancel" class="secondary-button">–û—Ç–º–µ–Ω–∞</button>
                <button id="modal-confirm" class="primary-button">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Notification container -->
    <div id="notification-container"></div>

    <script src="/static/admin-script.js"></script>
</body>
</html>